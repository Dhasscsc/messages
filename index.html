<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН & роЖро╡рогроЩрпНроХро│рпН</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #4F46E5; --primary-dark: #4338CA; --secondary: #D97706; --secondary-dark: #B45309;
            --success: #059669; --danger: #DC2626; --light: #F3F4F6; --dark: #1F2937; --gray: #6B7280;
            --purple: #8E44AD; --purple-dark: #6C3483;
        }
        body {
            font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%);
            min-height: 100vh; padding: 20px; color: var(--dark);
        }
        .container {
            max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white; padding: 25px 30px; text-align: center; position: relative;
        }
        .logo-container { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 15px; }
        .logo {
            width: 60px; height: 60px; background: white; border-radius: 50%; display: flex;
            align-items: center; justify-content: center; font-size: 30px; font-weight: bold;
            color: var(--primary); box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .header-text h1 { font-size: 26px; margin-bottom: 8px; }
        .header-text p { font-size: 16px; opacity: 0.9; }
        .contact-info { display: flex; justify-content: center; gap: 20px; margin-top: 15px; flex-wrap: wrap; }
        .contact-item {
            display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.1);
            padding: 8px 15px; border-radius: 50px; backdrop-filter: blur(10px); font-size: 14px;
        }
        .main-content { padding: 30px; }
        .service-selection-section { margin-bottom: 30px; }
        .section-title {
            color: var(--primary); font-size: 24px; margin-bottom: 20px; padding-bottom: 10px;
            border-bottom: 3px solid var(--primary); display: flex; align-items: center; justify-content: space-between;
        }
        .section-title i { font-size: 20px; }
        .title-actions { display: flex; gap: 8px; }
        .title-btn {
            background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 6px;
            cursor: pointer; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 5px;
        }
        .title-btn:hover { background: var(--primary-dark); }
        .service-buttons-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px; margin-bottom: 25px;
        }
        .service-btn {
            background: white; border: 2px solid #E5E7EB; border-radius: 10px; padding: 20px; text-align: center;
            cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; align-items: center;
            gap: 10px; position: relative;
        }
        .service-btn:hover { border-color: var(--primary); transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .service-btn.active { border-color: var(--primary); background: #F0F9FF; }
        .service-btn.custom-service { border-color: var(--success); border-style: dashed; }
        .service-icon { font-size: 30px; color: var(--primary); margin-bottom: 5px; }
        .service-btn-name { font-size: 16px; font-weight: 600; color: var(--dark); text-align: center; }
        .service-btn-price { font-size: 18px; font-weight: bold; color: var(--success); }
        .service-btn-category {
            font-size: 12px; color: var(--gray); background: #F3F4F6; padding: 3px 10px; border-radius: 10px;
        }
        .delete-service-btn {
            position: absolute; top: 8px; right: 8px; background: var(--danger); color: white; border: none;
            width: 22px; height: 22px; border-radius: 50%; cursor: pointer; display: none; align-items: center;
            justify-content: center; font-size: 12px;
        }
        .service-btn:hover .delete-service-btn { display: flex; }
        .quick-search { margin-top: 20px; display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        .search-box { position: relative; flex: 1; max-width: 400px; }
        .search-input {
            width: 100%; padding: 12px 45px 12px 15px; border: 2px solid #E5E7EB; border-radius: 50px;
            font-size: 15px; background: white;
        }
        .search-input:focus { outline: none; border-color: var(--primary); }
        .search-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--gray); font-size: 16px; }
        .category-filter { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
        .filter-btn {
            padding: 8px 15px; background: #F3F4F6; border: 2px solid #E5E7EB; border-radius: 20px; cursor: pointer;
            font-size: 13px; font-weight: 500; transition: all 0.3s;
        }
        .filter-btn:hover { border-color: var(--primary); background: #E0E7FF; }
        .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); }
        .service-info-section { margin-bottom: 30px; }
        .service-card {
            background: white; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); padding: 25px;
            margin-bottom: 25px; border: 2px solid #E5E7EB; transition: all 0.3s ease;
        }
        .service-card:hover { border-color: var(--primary); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .service-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
        .service-name-container { flex: 1; }
        .service-name { font-size: 24px; font-weight: bold; color: var(--dark); margin-bottom: 8px; }
        .service-category {
            display: inline-block; background: #E0E7FF; color: var(--primary); padding: 5px 15px;
            border-radius: 20px; font-size: 14px; font-weight: 600;
        }
        .service-price-container { text-align: right; }
        .service-price-label { font-size: 14px; color: var(--gray); margin-bottom: 5px; }
        .service-price { font-size: 32px; font-weight: bold; color: var(--success); }
        .service-description {
            margin: 20px 0; padding: 18px; background: #F9FAFB; border-radius: 10px; border-left: 4px solid var(--secondary);
        }
        .description-label { font-weight: 600; color: var(--dark); margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        .description-text { color: var(--gray); line-height: 1.6; font-size: 15px; }
        .documents-section { margin-top: 25px; }
        .documents-list { list-style: none; padding-left: 0; }
        .document-item {
            display: flex; align-items: center; gap: 12px; padding: 12px; background: #F9FAFB; border-radius: 8px;
            margin-bottom: 10px; border-left: 4px solid var(--primary); transition: all 0.3s;
        }
        .document-item:hover { background: #F3F4F6; transform: translateX(5px); }
        .document-item i { color: var(--success); font-size: 16px; }
        .edit-doc-btn {
            background: transparent; border: none; color: var(--primary); cursor: pointer; padding: 5px;
            border-radius: 4px; transition: all 0.3s;
        }
        .edit-doc-btn:hover { background: var(--primary); color: white; }
        .add-document-btn {
            background: var(--secondary); color: white; border: none; padding: 10px 20px; border-radius: 8px;
            cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px; font-size: 14px;
        }
        .add-document-btn:hover { background: var(--secondary-dark); }
        .whatsapp-section {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); border-radius: 12px; padding: 25px;
            color: white; margin-top: 30px;
        }
        .whatsapp-header { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; }
        .whatsapp-header i { font-size: 32px; }
        .whatsapp-header h3 { font-size: 22px; font-weight: bold; }
        .whatsapp-message-box {
            background: rgba(255,255,255,0.1); border-radius: 10px; padding: 18px; margin: 18px 0; backdrop-filter: blur(10px);
        }
        .message-preview {
            font-family: 'Arial', sans-serif; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px;
            margin: 15px 0; white-space: pre-wrap; line-height: 1.6; max-height: 250px; overflow-y: auto; font-size: 14px;
        }
        .customer-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        .input-group { display: flex; flex-direction: column; }
        .input-label { font-weight: 600; margin-bottom: 6px; font-size: 13px; }
        .input-field {
            padding: 10px; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px;
            background: rgba(255,255,255,0.1); color: white; font-size: 15px;
        }
        .input-field::placeholder { color: rgba(255,255,255,0.7); }
        .input-field:focus { outline: none; border-color: white; }
        .whatsapp-btn {
            background: white; color: #25D366; border: none; padding: 14px 28px; border-radius: 10px;
            font-size: 16px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 10px;
            margin: 18px auto 0; transition: all 0.3s; width: 100%; justify-content: center;
        }
        .whatsapp-btn:hover { transform: scale(1.02); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .whatsapp-test-btn {
            background: rgba(255,255,255,0.2); color: white; border: 1px solid white; padding: 8px 15px;
            border-radius: 6px; font-size: 13px; cursor: pointer; margin-top: 10px; display: flex; align-items: center; gap: 5px;
        }
        .whatsapp-test-btn:hover { background: rgba(255,255,255,0.3); }
        .action-buttons {
            display: flex; gap: 12px; justify-content: center; margin-top: 25px; padding: 20px; border-top: 1px solid #E5E7EB;
        }
        .action-btn {
            padding: 12px 22px; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer;
            display: flex; align-items: center; gap: 8px; transition: all 0.3s;
        }
        .btn-print { background: var(--primary); color: white; }
        .btn-print:hover { background: var(--primary-dark); }
        .btn-save { background: var(--success); color: white; }
        .btn-save:hover { background: #047857; }
        .btn-clear { background: var(--danger); color: white; }
        .btn-clear:hover { background: #B91C1C; }
        .btn-reset { background: var(--secondary); color: white; }
        .btn-reset:hover { background: var(--secondary-dark); }
        .customize-btn {
            background: var(--primary); color: white; border: none; padding: 10px 15px; border-radius: 8px;
            cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: all 0.3s; font-size: 14px;
        }
        .customize-btn:hover { background: var(--primary-dark); transform: translateY(-2px); }
        .footer { text-align: center; padding: 20px; background: var(--dark); color: white; margin-top: 30px; }
        .footer p { margin: 5px 0; font-size: 14px; }
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white; border-radius: 12px; padding: 25px; max-width: 500px; width: 90%;
            max-height: 80vh; overflow-y: auto;
        }
        .modal-header { font-size: 20px; font-weight: bold; color: var(--dark); margin-bottom: 15px; padding-bottom: 12px; border-bottom: 2px solid var(--primary); }
        .modal-input { width: 100%; padding: 10px; border: 2px solid #E5E7EB; border-radius: 8px; font-size: 15px; margin-bottom: 12px; }
        .modal-input:focus { outline: none; border-color: var(--primary); }
        .modal-textarea { width: 100%; padding: 10px; border: 2px solid #E5E7EB; border-radius: 8px; font-size: 15px; margin-bottom: 12px; min-height: 80px; resize: vertical; font-family: 'Arial', sans-serif; }
        .modal-buttons { display: flex; gap: 10px; margin-top: 15px; }
        .btn-add { flex: 1; padding: 10px; background: var(--success); color: white; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; }
        .btn-add:hover { background: #047857; }
        .btn-cancel { flex: 1; padding: 10px; background: var(--gray); color: white; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; }
        .btn-cancel:hover { background: #4B5563; }
        .service-counter { text-align: center; margin: 15px 0; color: var(--gray); font-size: 13px; }
        .service-counter span { font-weight: bold; color: var(--primary); }
        .new-service-btn {
            background: linear-gradient(135deg, var(--success) 0%, #047857 100%); color: white; border: 2px dashed white;
            border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; transition: all 0.3s;
            display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; min-height: 140px;
        }
        .new-service-btn:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .new-service-icon { font-size: 40px; margin-bottom: 8px; }
        .new-service-text { font-size: 16px; font-weight: 600; }
        @media (max-width: 768px) {
            .header { padding: 20px; }
            .logo-container { flex-direction: column; text-align: center; }
            .service-header { flex-direction: column; text-align: center; }
            .service-price-container { text-align: center; }
            .customer-inputs { grid-template-columns: 1fr; }
            .contact-info { flex-direction: column; align-items: center; gap: 10px; }
            .action-buttons { flex-direction: column; }
            .main-content { padding: 20px; }
            .service-price { font-size: 28px; }
            .service-name { font-size: 22px; }
            .section-title { font-size: 20px; flex-direction: column; align-items: flex-start; gap: 10px; }
            .service-buttons-grid { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
            .quick-search { flex-direction: column; align-items: stretch; }
            .search-box { max-width: 100%; }
            .whatsapp-btn { padding: 12px 20px; font-size: 15px; }
        }
        @media (max-width: 480px) {
            .header-text h1 { font-size: 22px; }
            .header-text p { font-size: 14px; }
            .action-btn { padding: 10px 18px; font-size: 14px; }
            .service-buttons-grid { grid-template-columns: 1fr; }
            .modal-content { padding: 20px; }
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .service-card { animation: fadeIn 0.5s ease-out; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-dark); }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <div class="logo">D</div>
                <div class="header-text">
                    <h1>родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН</h1>
                    <p>Thoothukudi-1 - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН & родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН</p>
                </div>
            </div>
            <div class="contact-info">
                <div class="contact-item"><i class="fas fa-phone"></i><span>88 70 23 23 32</span></div>
                <div class="contact-item"><i class="fas fa-phone"></i><span>98 43 23 23 24</span></div>
                <div class="contact-item"><i class="fab fa-whatsapp"></i><span>WhatsApp: 9843232324</span></div>
            </div>
        </div>
        <div class="main-content">
            <div class="service-selection-section">
                <h2 class="section-title">
                    <div><i class="fas fa-list"></i> роЪрпЗро╡рпИроХро│рпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</div>
                    <div class="title-actions">
                        <button class="title-btn" onclick="openAddServiceModal()"><i class="fas fa-plus"></i> рокрпБродро┐роп роЪрпЗро╡рпИ</button>
                        <button class="title-btn" onclick="openEditServiceModal()" style="background: var(--secondary);"><i class="fas fa-edit"></i> роЪрпЗро╡рпИ родро┐ро░рпБродрпНродрпБ</button>
                    </div>
                </h2>
                <div class="service-counter">
                    роорпКродрпНрод роЪрпЗро╡рпИроХро│рпН: <span id="totalServicesCount">0</span> | 
                    рокропройро░рпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯро╡рпИ: <span id="customServicesCount">0</span> | 
                    ро░рпЖроЯро┐роорпЗроЯрпН роЪрпЗро╡рпИроХро│рпН: <span id="predefinedServicesCount">10</span>
                </div>
                <div class="quick-search">
                    <div class="search-box">
                        <input type="text" class="search-input" id="serviceSearch" placeholder="ЁЯФН роЪрпЗро╡рпИропрпИ родрпЗроЯро╡рпБроорпН...">
                        <div class="search-icon"><i class="fas fa-search"></i></div>
                    </div>
                    <div class="category-filter">
                        <button class="filter-btn active" onclick="filterServices('all')">роЕройрпИродрпНродрпБроорпН</button>
                        <button class="filter-btn" onclick="filterServices('роЕро░роЪрпБ роЪрпЗро╡рпИ')">роЕро░роЪрпБ роЪрпЗро╡рпИ</button>
                        <button class="filter-btn" onclick="filterServices('роЕроЪрпНроЪро┐роЯрпБродро▓рпН')">роЕроЪрпНроЪро┐роЯрпБродро▓рпН</button>
                        <button class="filter-btn" onclick="filterServices('рокрпБроХрпИрокрпНрокроЯроорпН')">рокрпБроХрпИрокрпНрокроЯроорпН</button>
                        <button class="filter-btn" onclick="filterServices('роЖро╡рогроорпН')">роЖро╡рогроорпН</button>
                        <button class="filter-btn" onclick="filterServices('рокро╛ро╕рпНрокрпЛро░рпНроЯрпН')">рокро╛ро╕рпНрокрпЛро░рпНроЯрпН</button>
                        <button class="filter-btn" onclick="filterServices('ро╡ро┐роЪро╛')">ро╡ро┐роЪро╛</button>
                        <button class="filter-btn" onclick="filterServices('custom')">роОройродрпБ роЪрпЗро╡рпИроХро│рпН</button>
                    </div>
                </div>
                <div class="service-buttons-grid" id="serviceButtonsGrid"></div>
                <div class="service-buttons-grid">
                    <div class="new-service-btn" onclick="openAddServiceModal()">
                        <div class="new-service-icon"><i class="fas fa-plus-circle"></i></div>
                        <div class="new-service-text">+ рокрпБродро┐роп роЪрпЗро╡рпИ роЪрпЗро░рпНроХрпНроХ</div>
                        <div style="font-size: 13px; opacity: 0.8;">роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН</div>
                    </div>
                </div>
            </div>
            <div class="service-info-section">
                <h2 class="section-title"><i class="fas fa-info-circle"></i> роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН</h2>
                <div class="service-card">
                    <div class="service-header">
                        <div class="service-name-container">
                            <div class="service-name" id="serviceNameDisplay">роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</div>
                            <div class="service-category" id="serviceCategoryDisplay">роЪрпЗро╡рпИ ро╡роХрпИ</div>
                        </div>
                        <div class="service-price-container">
                            <div class="service-price-label">роЪрпЗро╡рпИ роХроЯрпНроЯрогроорпН</div>
                            <div class="service-price" id="servicePriceDisplay">тВ╣0.00</div>
                        </div>
                    </div>
                    <div class="service-description">
                        <div class="description-label"><i class="fas fa-file-alt"></i> роЪрпЗро╡рпИ ро╡ро┐ро│роХрпНроХроорпН</div>
                        <div class="description-text" id="serviceDescriptionDisplay">роорпЗро▓рпЗ роЙро│рпНро│ рокроЯрпНроЯройрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</div>
                    </div>
                    <div class="documents-section">
                        <label class="description-label"><i class="fas fa-file-alt"></i> родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН</label>
                        <ul class="documents-list" id="documentsList">
                            <li class="document-item"><i class="fas fa-check-circle"></i><span>роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</span></li>
                        </ul>
                        <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                            <button type="button" class="add-document-btn" onclick="openAddDocumentModal()"><i class="fas fa-plus"></i> рокрпБродро┐роп роЖро╡рогроорпН</button>
                            <button type="button" class="customize-btn" onclick="openEditDocumentModal()"><i class="fas fa-edit"></i> роЖро╡рогроЩрпНроХро│рпН родро┐ро░рпБродрпНродрпБ</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="whatsapp-section">
                <div class="whatsapp-header">
                    <i class="fab fa-whatsapp"></i>
                    <h3>ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпБроХрпНроХрпБ ро╡ро╛роЯрпНроЪрокрпНрокро┐ро▓рпН роЕройрпБрокрпНрокрпБроХ</h3>
                </div>
                <div class="whatsapp-message-box">
                    <div class="customer-inputs">
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН *</label>
                            <input type="text" id="customerName" class="input-field" placeholder="ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН">
                        </div>
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпН *</label>
                            <input type="tel" id="customerPhone" class="input-field" placeholder="9843232324">
                        </div>
                    </div>
                    <button class="whatsapp-test-btn" onclick="testWhatsAppMessage()"><i class="fas fa-vial"></i> WhatsApp роЪрпЖропрпНродро┐ роЪрпЛродройрпИ</button>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:</label>
                        <div class="message-preview" id="messagePreview">ро╡рогроХрпНроХроорпН!

родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропродрпНродро┐ро▒рпНроХрпБ роиро▓рпНро╡ро░ро╡рпБ!

роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН...</div>
                    </div>
                    <button type="button" class="whatsapp-btn" onclick="sendWhatsAppMessage()"><i class="fab fa-whatsapp"></i> ро╡ро╛роЯрпНроЪрокрпНрокро┐ро▓рпН роЕройрпБрокрпНрокрпБ</button>
                </div>
            </div>
            
            <!-- роиройрпНро▒ро┐ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ рокроХрпБродро┐ - рокрпБродро┐родро╛роХ роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ -->
            <div class="whatsapp-section" style="background: linear-gradient(135deg, #8E44AD 0%, #6C3483 100%); margin-top: 30px;">
                <div class="whatsapp-header">
                    <i class="fas fa-hands-helping"></i>
                    <h3>роирпЗро░ро┐ро▓рпН ро╡роирпНрод ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпБроХрпНроХрпБ роиройрпНро▒ро┐ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ</h3>
                </div>
                <div class="whatsapp-message-box">
                    <div class="customer-inputs">
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН *</label>
                            <input type="text" id="thankYouCustomerName" class="input-field" placeholder="ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН">
                        </div>
                        <div class="input-group">
                            <label class="input-label">ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпН *</label>
                            <input type="tel" id="thankYouCustomerPhone" class="input-field" placeholder="9843232324">
                        </div>
                    </div>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роЪрпЗро╡рпИроХро│ро┐ройрпН рокрпЖропро░рпНроХро│рпН (роХро╛ро▒рпНрокрпБро│рпНро│ро┐ропро╛ро▓рпН рокро┐ро░ро┐роХрпНроХро╡рпБроорпН)</label>
                        <input type="text" id="thankYouServices" class="input-field" placeholder="роО.роХро╛: роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ, рокро╛ро╕рпНрокрпЛро░рпНроЯрпН рокрпЛроЯрпНроЯрпЛ, рокро╛ройрпН роХро╛ро░рпНроЯрпБ">
                    </div>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН (ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН)</label>
                        <input type="text" id="thankYouRefNumbers" class="input-field" placeholder="роО.роХро╛: REF001, REF002">
                    </div>
                    <button class="whatsapp-test-btn" onclick="testThankYouMessage()"><i class="fas fa-vial"></i> роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роЪрпЛродройрпИ</button>
                    <div style="margin-top: 15px;">
                        <label class="input-label">роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:</label>
                        <div class="message-preview" id="thankYouMessagePreview">ро╡рогроХрпНроХроорпН [рокрпЖропро░рпН]!

роОроЩрпНроХро│рпН родро╛ро╕рпН рокрпКродрпБроЪрпЗро╡рпИ роорпИропродрпНродрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНродрпБ, ро╡ро░рпБроХрпИ рокрпБро░ро┐роирпНродроорпИроХрпНроХрпБ, рооро┐роХро╡рпБроорпН роиройрпНро▒ро┐.

роЪрпЗро╡рпИроХро│рпН: [роЪрпЗро╡рпИроХро│рпН]
роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН: [роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН]

роЗроирпНрод роиро╛ро│рпН роЗройро┐родро╛роХ роЕроорпИроп ро╡ро╛ро┤рпНродрпНродрпБроХро┐ро▒рпЛроорпН.

роиройрпНро▒ро┐!
родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН
родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1</div>
                    </div>
                    <button type="button" class="whatsapp-btn" onclick="sendThankYouMessage()" style="background: #9B59B6; color: white;"><i class="fab fa-whatsapp"></i> роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрпБ</button>
                </div>
            </div>
            <!-- роиройрпНро▒ро┐ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ рокроХрпБродро┐ роорпБроЯро┐ро╡рпБ -->
            
            <div class="action-buttons">
                <button type="button" class="action-btn btn-print" onclick="printPage()"><i class="fas fa-print"></i> роЕроЪрпНроЪро┐роЯрпБ</button>
                <button type="button" class="action-btn btn-save" onclick="saveServiceInfo()"><i class="fas fa-save"></i> роЪрпЗрооро┐</button>
                <button type="button" class="action-btn btn-reset" onclick="resetPredefinedServices()"><i class="fas fa-undo"></i> ро░рпЖроЯро┐роорпЗроЯрпН роорпАроЯрпНроЯроорпИ</button>
                <button type="button" class="action-btn btn-clear" onclick="clearAll()"><i class="fas fa-trash"></i> роЕро┤ро┐</button>
            </div>
        </div>
        <div class="footer">
            <p>роиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!</p>
            <p>родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН, родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1</p>
            <p style="font-size: 13px; margin-top: 8px; opacity: 0.8;">┬й 2024 роЕройрпИродрпНродрпБ роЙро░ро┐роорпИроХро│рпБроорпН рокро╛родрпБроХро╛роХрпНроХрокрпНрокроЯрпНроЯро╡рпИ</p>
        </div>
    </div>
    <div class="modal" id="addDocumentModal">
        <div class="modal-content">
            <div class="modal-header">рокрпБродро┐роп роЖро╡рогроорпН роЪрпЗро░рпНроХрпНроХ</div>
            <input type="text" id="newDocument" class="modal-input" placeholder="роЖро╡рогродрпНродро┐ройрпН рокрпЖропро░рпН (роО.роХро╛: ро╡ро╛роХрпНроХрпБроЪрпНроЪрпАроЯрпНроЯрпБ)" autofocus>
            <div class="modal-buttons">
                <button type="button" class="btn-add" onclick="addDocument()">роЪрпЗро░рпНроХрпНроХ</button>
                <button type="button" class="btn-cancel" onclick="closeAddDocumentModal()">ро░родрпНродрпБ</button>
            </div>
        </div>
    </div>
    <div class="modal" id="editServiceModal">
        <div class="modal-content">
            <div class="modal-header">роЪрпЗро╡рпИропрпИ родро┐ро░рпБродрпНродрпБ</div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИропро┐ройрпН рокрпЖропро░рпН *</label>
                <input type="text" id="editServiceName" class="modal-input" placeholder="роЪрпЗро╡рпИ рокрпЖропро░рпН">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ ро╡роХрпИ *</label>
                <select id="editServiceCategory" class="modal-input">
                    <option value="роЕро░роЪрпБ роЪрпЗро╡рпИ">роЕро░роЪрпБ роЪрпЗро╡рпИ</option><option value="роЕроЪрпНроЪро┐роЯрпБродро▓рпН">роЕроЪрпНроЪро┐роЯрпБродро▓рпН</option>
                    <option value="рокрпБроХрпИрокрпНрокроЯроорпН">рокрпБроХрпИрокрпНрокроЯроорпН</option><option value="роЖро╡рогроорпН">роЖро╡рогроорпН</option>
                    <option value="рокро╛ро╕рпНрокрпЛро░рпНроЯрпН">рокро╛ро╕рпНрокрпЛро░рпНроЯрпН</option><option value="ро╡ро┐роЪро╛">ро╡ро┐роЪро╛</option>
                    <option value="ро╡ро╛роХройроорпН">ро╡ро╛роХройроорпН</option><option value="роХро▓рпНро╡ро┐">роХро▓рпНро╡ро┐</option>
                    <option value="рооро░рпБродрпНродрпБро╡роорпН">рооро░рпБродрпНродрпБро╡роорпН</option><option value="рокро┐ро▒">рокро┐ро▒</option>
                </select>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ роХроЯрпНроЯрогроорпН (тВ╣) *</label>
                <input type="number" id="editServicePrice" class="modal-input" placeholder="0.00" min="0" step="0.01">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ ро╡ро┐ро│роХрпНроХроорпН</label>
                <textarea id="editServiceDescription" class="modal-textarea" placeholder="роЪрпЗро╡рпИ рокро▒рпНро▒ро┐роп ро╡ро┐рокро░роЩрпНроХро│рпН..."></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН (роТро╡рпНро╡рпКро░рпБ ро╡ро░ро┐ропро┐ро▓рпБроорпН роТройрпНро▒рпБ)</label>
                <textarea id="editServiceDocuments" class="modal-textarea" placeholder="роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ
рокрпБроХрпИрокрпНрокроЯроорпН
роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роРроХро╛ройрпН</label>
                <select id="editServiceIcon" class="modal-input">
                    <option value="fas fa-id-card">роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ</option><option value="fas fa-credit-card">рокро╛ройрпН роХро╛ро░рпНроЯрпБ</option>
                    <option value="fas fa-camera">рокрпБроХрпИрокрпНрокроЯроорпН</option><option value="fas fa-passport">рокро╛ро╕рпНрокрпЛро░рпНроЯрпН</option>
                    <option value="fas fa-car">ро╡ро╛роХройроорпН</option><option value="fas fa-graduation-cap">роХро▓рпНро╡ро┐</option>
                    <option value="fas fa-file-contract">роЖро╡рогроорпН</option><option value="fas fa-stamp">роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН</option>
                    <option value="fas fa-file-signature">роХрпИропрпКрокрпНрокроорпН</option><option value="fas fa-print">роЕроЪрпНроЪро┐роЯрпБродро▓рпН</option>
                    <option value="fas fa-certificate">роЪро╛ройрпНро▒ро┐родро┤рпН</option><option value="fas fa-home">роорпБроХро╡ро░ро┐</option>
                    <option value="fas fa-briefcase">ро╡рпЗро▓рпИ</option><option value="fas fa-plane">ро╡ро┐роЪро╛</option>
                    <option value="fas fa-heartbeat">рооро░рпБродрпНродрпБро╡роорпН</option><option value="fas fa-wallet">рокрогроорпН</option>
                    <option value="fas fa-mobile-alt">роорпКрокрпИро▓рпН</option><option value="fas fa-laptop">роХроорпНрокрпНропрпВроЯрпНроЯро░рпН</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn-add" onclick="saveEditedService()">роЪрпЗрооро┐</button>
                <button type="button" class="btn-cancel" onclick="closeEditServiceModal()">ро░родрпНродрпБ</button>
            </div>
        </div>
    </div>
    <div class="modal" id="addServiceModal">
        <div class="modal-content">
            <div class="modal-header">рокрпБродро┐роп роЪрпЗро╡рпИ роЪрпЗро░рпНроХрпНроХ</div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИропро┐ройрпН рокрпЖропро░рпН *</label>
                <input type="text" id="newServiceName" class="modal-input" placeholder="роО.роХро╛: роороХро┐ро┤рпБроирпНродрпБ роЙро░ро┐роороорпН ро╡ро┐рогрпНрогрокрпНрокроорпН" autofocus>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ ро╡роХрпИ *</label>
                <select id="newServiceCategory" class="modal-input">
                    <option value="роЕро░роЪрпБ роЪрпЗро╡рпИ">роЕро░роЪрпБ роЪрпЗро╡рпИ</option><option value="роЕроЪрпНроЪро┐роЯрпБродро▓рпН">роЕроЪрпНроЪро┐роЯрпБродро▓рпН</option>
                    <option value="рокрпБроХрпИрокрпНрокроЯроорпН">рокрпБроХрпИрокрпНрокроЯроорпН</option><option value="роЖро╡рогроорпН">роЖро╡рогроорпН</option>
                    <option value="рокро╛ро╕рпНрокрпЛро░рпНроЯрпН">рокро╛ро╕рпНрокрпЛро░рпНроЯрпН</option><option value="ро╡ро┐роЪро╛">ро╡ро┐роЪро╛</option>
                    <option value="ро╡ро╛роХройроорпН">ро╡ро╛роХройроорпН</option><option value="роХро▓рпНро╡ро┐">роХро▓рпНро╡ро┐</option>
                    <option value="рооро░рпБродрпНродрпБро╡роорпН">рооро░рпБродрпНродрпБро╡роорпН</option><option value="рокро┐ро▒">рокро┐ро▒</option>
                </select>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ роХроЯрпНроЯрогроорпН (тВ╣) *</label>
                <input type="number" id="newServicePrice" class="modal-input" placeholder="0.00" min="0" step="0.01">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роЪрпЗро╡рпИ ро╡ро┐ро│роХрпНроХроорпН</label>
                <textarea id="newServiceDescription" class="modal-textarea" placeholder="роЪрпЗро╡рпИ рокро▒рпНро▒ро┐роп ро╡ро┐рокро░роЩрпНроХро│рпН..."></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН (роТро╡рпНро╡рпКро░рпБ ро╡ро░ро┐ропро┐ро▓рпБроорпН роТройрпНро▒рпБ)</label>
                <textarea id="newServiceDocuments" class="modal-textarea" placeholder="роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ
рокрпБроХрпИрокрпНрокроЯроорпН
роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; margin-bottom: 6px;">роРроХро╛ройрпН</label>
                <select id="newServiceIcon" class="modal-input">
                    <option value="fas fa-id-card">роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ</option><option value="fas fa-credit-card">рокро╛ройрпН роХро╛ро░рпНроЯрпБ</option>
                    <option value="fas fa-camera">рокрпБроХрпИрокрпНрокроЯроорпН</option><option value="fas fa-passport">рокро╛ро╕рпНрокрпЛро░рпНроЯрпН</option>
                    <option value="fas fa-car">ро╡ро╛роХройроорпН</option><option value="fas fa-graduation-cap">роХро▓рпНро╡ро┐</option>
                    <option value="fas fa-file-contract">роЖро╡рогроорпН</option><option value="fas fa-stamp">роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН</option>
                    <option value="fas fa-file-signature">роХрпИропрпКрокрпНрокроорпН</option><option value="fas fa-print">роЕроЪрпНроЪро┐роЯрпБродро▓рпН</option>
                    <option value="fas fa-certificate">роЪро╛ройрпНро▒ро┐родро┤рпН</option><option value="fas fa-home">роорпБроХро╡ро░ро┐</option>
                    <option value="fas fa-briefcase">ро╡рпЗро▓рпИ</option><option value="fas fa-plane">ро╡ро┐роЪро╛</option>
                    <option value="fas fa-heartbeat">рооро░рпБродрпНродрпБро╡роорпН</option><option value="fas fa-wallet">рокрогроорпН</option>
                    <option value="fas fa-mobile-alt">роорпКрокрпИро▓рпН</option><option value="fas fa-laptop">роХроорпНрокрпНропрпВроЯрпНроЯро░рпН</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn-add" onclick="saveNewService()">роЪрпЗро╡рпИропрпИ роЪрпЗро░рпНроХрпНроХ</button>
                <button type="button" class="btn-cancel" onclick="closeAddServiceModal()">ро░родрпНродрпБ</button>
            </div>
        </div>
    </div>
    <script>
        const originalPredefinedServices = [
            { id: 1, name: "роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ рокро┐ро░ро┐рогрпНроЯрпН", category: "роЕро░роЪрпБ роЪрпЗро╡рпИ", price: 10.00, description: "роЖродро╛ро░рпН роХро╛ро░рпНроЯрпИ роЕроЪрпНроЪро┐роЯрпБродро▓рпН рооро▒рпНро▒рпБроорпН ро▓рпЗрооро┐ройрпЗро╖ройрпН", icon: "fas fa-id-card", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ (роЕроЪро▓рпН + роироХро▓рпН)", "роорпКрокрпИро▓рпН роОрогрпН (роЖродро╛ро░рпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ)", "рокрпБроХрпИрокрпНрокроЯроорпН (рокро╛ро╕рпНрокрпЛро░рпНроЯрпН роЕро│ро╡рпБ)"], isPredefined: true },
            { id: 2, name: "рокро╛ройрпН роХро╛ро░рпНроЯрпБ ро╡ро┐рогрпНрогрокрпНрокроорпН", category: "роЕро░роЪрпБ роЪрпЗро╡рпИ", price: 120.00, description: "рокрпБродро┐роп рокро╛ройрпН роХро╛ро░рпНроЯро┐ро▒рпНроХро╛рой ро╡ро┐рогрпНрогрокрпНрокроорпН рооро▒рпНро▒рпБроорпН роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ", icon: "fas fa-credit-card", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокрпБроХрпИрокрпНрокроЯроорпН 2 (рокро╛ро╕рпНрокрпЛро░рпНроЯрпН роЕро│ро╡рпБ)", "роХрпИропрпКрокрпНрокроорпН", "роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"], isPredefined: true },
            { id: 3, name: "рокро╛ро╕рпНрокрпЛро░рпНроЯрпН рокрпЛроЯрпНроЯрпЛ", category: "рокрпБроХрпИрокрпНрокроЯроорпН", price: 50.00, description: "рокро╛ро╕рпНрокрпЛро░рпНроЯрпН роЕро│ро╡рпБ рокрпБроХрпИрокрпНрокроЯроорпН роОроЯрпБродрпНродро▓рпН рооро▒рпНро▒рпБроорпН роЕроЪрпНроЪро┐роЯрпБродро▓рпН", icon: "fas fa-camera", documents: ["роОроирпНрод роЖро╡рогроорпБроорпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ", "роХро░рпБрокрпНрокрпБ/роирпАро▓ ро╖ро░рпНроЯрпН роЕрогро┐ропро╡рпБроорпН"], isPredefined: true },
            { id: 4, name: "ро╡рпЛроЯрпНроЯро░рпН роРроЯро┐ роХро╛ро░рпНроЯрпБ", category: "роЕро░роЪрпБ роЪрпЗро╡рпИ", price: 25.00, description: "ро╡рпЛроЯрпНроЯро░рпН роРроЯро┐ роХро╛ро░рпНроЯрпБ ро╡ро┐рогрпНрогрокрпНрокроорпН рооро▒рпНро▒рпБроорпН роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ", icon: "fas fa-vote-yea", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокрпБроХрпИрокрпНрокроЯроорпН", "ро╡ропродрпБ роЪро╛ройрпНро▒рпБ", "роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"], isPredefined: true },
            { id: 5, name: "ро░рпЗро╖ройрпН роХро╛ро░рпНроЯрпБ ро╡ро┐рогрпНрогрокрпНрокроорпН", category: "роЕро░роЪрпБ роЪрпЗро╡рпИ", price: 80.00, description: "рокрпБродро┐роп ро░рпЗро╖ройрпН роХро╛ро░рпНроЯро┐ро▒рпНроХро╛рой ро╡ро┐рогрпНрогрокрпНрокроорпН", icon: "fas fa-shopping-basket", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒рпБ", "роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ", "рокрпБроХрпИрокрпНрокроЯроорпН"], isPredefined: true },
            { id: 6, name: "роХрпБроЯрпБроорпНрокроЪрпН роЪро╛ройрпНро▒рпБ", category: "роЖро╡рогроорпН", price: 40.00, description: "роХрпБроЯрпБроорпНрокроЪрпН роЪро╛ройрпНро▒рпБ родропро╛ро░ро┐родрпНродро▓рпН рооро▒рпНро▒рпБроорпН роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН", icon: "fas fa-home", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ (роЕройрпИродрпНродрпБ роЙро▒рпБрокрпНрокро┐ройро░рпНроХро│рпН)", "ро╡ро╛роХрпНроХро╛ро│ро░рпН роРроЯро┐ роХро╛ро░рпНроЯрпБ", "роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ"], isPredefined: true },
            { id: 7, name: "ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒рпБ", category: "роЖро╡рогроорпН", price: 60.00, description: "ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒рпБ родропро╛ро░ро┐родрпНродро▓рпН рооро▒рпНро▒рпБроорпН роЪро╛ройрпНро▒ро┐родро┤рпН", icon: "fas fa-file-invoice-dollar", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокро╛ройрпН роХро╛ро░рпНроЯрпБ", "ро╡ро░ро┐ ро░роЪрпАродрпБ", "ро╡рпЗро▓рпИ роЪро╛ройрпНро▒рпБ"], isPredefined: true },
            { id: 8, name: "роЯро┐рокрпНро│рпЛрооро╛ роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН", category: "роЖро╡рогроорпН", price: 100.00, description: "роХро▓рпНро╡ро┐ роЪро╛ройрпНро▒рпБроХро│рпН роЕроЯрпНроЯро╕рпНроЯрпЗро╖ройрпН", icon: "fas fa-graduation-cap", documents: ["роЯро┐рокрпНро│рпЛрооро╛/роЯро┐роХро┐ро░ро┐ роЕроЪро▓рпН", "рооро╛ро░рпНроХрпН ро╖рпАроЯрпН роЕроЪро▓рпН", "роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокрпБроХрпИрокрпНрокроЯроорпН"], isPredefined: true },
            { id: 9, name: "рокро╛ро╕рпНрокрпЛро░рпНроЯрпН ро╡ро┐рогрпНрогрокрпНрокроорпН", category: "рокро╛ро╕рпНрокрпЛро░рпНроЯрпН", price: 300.00, description: "рокрпБродро┐роп рокро╛ро╕рпНрокрпЛро░рпНроЯро┐ро▒рпНроХро╛рой ро╡ро┐рогрпНрогрокрпНрокроорпН рооро▒рпНро▒рпБроорпН роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ", icon: "fas fa-passport", documents: ["роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ", "рокро╛ройрпН роХро╛ро░рпНроЯрпБ", "рокро┐ро▒рокрпНрокрпБ роЪро╛ройрпНро▒рпБ", "ро╡ро╛роХрпНроХро╛ро│ро░рпН роРроЯро┐", "рокрпБроХрпИрокрпНрокроЯроорпН 4"], isPredefined: true },
            { id: 10, name: "ро╡ро┐роЪро╛ роЖро╡рогроЩрпНроХро│рпН", category: "ро╡ро┐роЪро╛", price: 500.00, description: "ро╡ро┐роЪро╛ ро╡ро┐рогрпНрогрокрпНрокродрпНродро┐ро▒рпНроХро╛рой роЖро╡рог родропро╛ро░ро┐рокрпНрокрпБ рооро▒рпНро▒рпБроорпН роЪро╛ройрпНро▒ро┐родро┤рпН", icon: "fas fa-plane", documents: ["рокро╛ро╕рпНрокрпЛро░рпНроЯрпН", "рокро╛ро▓рпН ро╕рпНро▓ро┐рокрпН 6 рооро╛родроорпН", "ро╡роЩрпНроХро┐ рокрпЗро▓ройрпНро╕рпН", "ро╡рпЗро▓рпИ роЪро╛ройрпНро▒рпБ", "рокрпБроХрпИрокрпНрокроЯроорпН"], isPredefined: true }
        ];
        let predefinedServices = [...originalPredefinedServices];
        let customServices = [];
        let currentService = { id: 0, name: "роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", category: "роЪрпЗро╡рпИ ро╡роХрпИ", price: 0, description: "роорпЗро▓рпЗ роЙро│рпНро│ рокроЯрпНроЯройрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", icon: "fas fa-question-circle", documents: ["роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН"], customDocuments: [], isPredefined: false };
        let activeFilter = 'all';
        
        document.addEventListener('DOMContentLoaded', function() {
            loadAllServices(); updateDisplay(); updateWhatsAppMessage(); loadSavedData();
            document.getElementById('serviceSearch').addEventListener('input', function() { renderServices(); });
            document.getElementById('customerName').addEventListener('input', updateWhatsAppMessage);
            document.getElementById('customerPhone').addEventListener('input', updateWhatsAppMessage);
            
            // роиройрпНро▒ро┐ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ event listeners
            document.getElementById('thankYouCustomerName').addEventListener('input', updateThankYouMessage);
            document.getElementById('thankYouCustomerPhone').addEventListener('input', updateThankYouMessage);
            document.getElementById('thankYouServices').addEventListener('input', updateThankYouMessage);
            document.getElementById('thankYouRefNumbers').addEventListener('input', updateThankYouMessage);
        });
        
        function loadAllServices() {
            const savedPredefinedServices = localStorage.getItem('dhassPredefinedServices');
            if (savedPredefinedServices) { try { predefinedServices = JSON.parse(savedPredefinedServices); } catch (e) { predefinedServices = [...originalPredefinedServices]; } }
            const savedCustomServices = localStorage.getItem('dhassCustomServices');
            if (savedCustomServices) { try { customServices = JSON.parse(savedCustomServices); } catch (e) { customServices = []; } }
            renderServices(); updateServiceCount();
        }
        
        function renderServices() {
            const grid = document.getElementById('serviceButtonsGrid'); if (!grid) return; grid.innerHTML = '';
            let filteredServices = [...predefinedServices, ...customServices];
            if (activeFilter !== 'all') {
                if (activeFilter === 'custom') { filteredServices = filteredServices.filter(s => !s.isPredefined); }
                else { filteredServices = filteredServices.filter(s => s.category === activeFilter); }
            }
            const searchTerm = document.getElementById('serviceSearch').value.toLowerCase();
            if (searchTerm) { filteredServices = filteredServices.filter(s => s.name.toLowerCase().includes(searchTerm) || s.category.toLowerCase().includes(searchTerm) || s.description.toLowerCase().includes(searchTerm)); }
            filteredServices.forEach(service => {
                const button = document.createElement('div');
                button.className = `service-btn ${service.isPredefined ? '' : 'custom-service'}`;
                button.innerHTML = `<div class="service-icon"><i class="${service.icon}"></i></div><div class="service-btn-name">${service.name}</div><div class="service-btn-category">${service.category}</div><div class="service-btn-price">тВ╣${service.price.toFixed(2)}</div>${!service.isPredefined ? `<button class="delete-service-btn" onclick="deleteCustomService(${service.id})"><i class="fas fa-times"></i></button>` : ''}`;
                button.addEventListener('click', function(e) { e.stopPropagation(); selectService(service); });
                grid.appendChild(button);
            });
            updateServiceCount();
        }
        
        function filterServices(category) {
            activeFilter = category;
            document.querySelectorAll('.filter-btn').forEach(btn => { btn.classList.remove('active'); if (btn.textContent.includes(category) || (category === 'all' && btn.textContent.includes('роЕройрпИродрпНродрпБроорпН'))) { btn.classList.add('active'); } });
            renderServices();
        }
        
        function updateServiceCount() {
            document.getElementById('totalServicesCount').textContent = predefinedServices.length + customServices.length;
            document.getElementById('customServicesCount').textContent = customServices.length;
            document.getElementById('predefinedServicesCount').textContent = predefinedServices.length;
        }
        
        function selectService(service) {
            document.querySelectorAll('.service-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            currentService = { ...service, customDocuments: currentService.id === service.id ? (currentService.customDocuments || [...service.documents]) : [...service.documents] };
            updateDisplay(); updateDocumentsList(); updateWhatsAppMessage(); saveToLocalStorage();
        }
        
        function updateDisplay() {
            document.getElementById('serviceNameDisplay').textContent = currentService.name;
            document.getElementById('serviceCategoryDisplay').textContent = currentService.category;
            document.getElementById('servicePriceDisplay').textContent = `тВ╣${currentService.price.toFixed(2)}`;
            document.getElementById('serviceDescriptionDisplay').textContent = currentService.description;
        }
        
        function openAddServiceModal() {
            document.getElementById('newServiceName').value = '';
            document.getElementById('newServiceCategory').value = 'роЕро░роЪрпБ роЪрпЗро╡рпИ';
            document.getElementById('newServicePrice').value = '';
            document.getElementById('newServiceDescription').value = '';
            document.getElementById('newServiceDocuments').value = '';
            document.getElementById('newServiceIcon').value = 'fas fa-id-card';
            document.getElementById('addServiceModal').classList.add('active');
        }
        
        function closeAddServiceModal() { document.getElementById('addServiceModal').classList.remove('active'); }
        
        function saveNewService() {
            const name = document.getElementById('newServiceName').value.trim();
            const category = document.getElementById('newServiceCategory').value;
            const price = parseFloat(document.getElementById('newServicePrice').value) || 0;
            const description = document.getElementById('newServiceDescription').value.trim();
            const documentsText = document.getElementById('newServiceDocuments').value.trim();
            const icon = document.getElementById('newServiceIcon').value;
            if (!name) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЗро╡рпИропро┐ройрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН'); return; }
            if (!category) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЗро╡рпИ ро╡роХрпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН'); return; }
            if (price <= 0) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪро░ро┐ропро╛рой роХроЯрпНроЯрогродрпНродрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН'); return; }
            const newService = {
                id: customServices.length > 0 ? Math.max(...customServices.map(s => s.id)) + 1 : 1001,
                name: name, category: category, price: price, description: description || `${name} роЪрпЗро╡рпИ`,
                icon: icon, documents: documentsText ? documentsText.split('\n').filter(d => d.trim()) : ["ро╡ро┐рокро░роЩрпНроХро│рпН родрпЗро╡рпИрокрпНрокроЯрпБроорпН"], isPredefined: false
            };
            customServices.push(newService); saveCustomServicesToStorage(); renderServices(); selectService(newService); closeAddServiceModal();
            alert(`рокрпБродро┐роп роЪрпЗро╡рпИ "${name}" ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ!`);
        }
        
        function deleteCustomService(serviceId) {
            event.stopPropagation();
            if (!confirm('роЗроирпНрод роЪрпЗро╡рпИропрпИ роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) return;
            const isPredefined = predefinedServices.some(s => s.id === serviceId);
            if (isPredefined) {
                const originalService = originalPredefinedServices.find(s => s.id === serviceId);
                if (originalService) {
                    const index = predefinedServices.findIndex(s => s.id === serviceId);
                    if (index !== -1) {
                        predefinedServices[index] = {...originalService};
                        localStorage.setItem('dhassPredefinedServices', JSON.stringify(predefinedServices));
                        renderServices();
                        if (currentService.id === serviceId) { currentService = {...predefinedServices[index]}; updateDisplay(); updateDocumentsList(); }
                        alert('ро░рпЖроЯро┐роорпЗроЯрпН роЪрпЗро╡рпИ роЕроЪро▓рпН роиро┐ро▓рпИроХрпНроХрпБ роорпАроЯрпНроЯроорпИроХрпНроХрокрпНрокроЯрпНроЯродрпБ!'); return;
                    }
                }
            } else {
                customServices = customServices.filter(s => s.id !== serviceId); saveCustomServicesToStorage();
            }
            renderServices();
            if (currentService.id === serviceId) {
                currentService = { id: 0, name: "роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", category: "роЪрпЗро╡рпИ ро╡роХрпИ", price: 0, description: "роорпЗро▓рпЗ роЙро│рпНро│ рокроЯрпНроЯройрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", icon: "fas fa-question-circle", documents: ["роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН"], customDocuments: [], isPredefined: false };
                updateDisplay(); updateDocumentsList();
            }
            alert('роЪрпЗро╡рпИ роирпАроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
        }
        
        function openEditServiceModal() {
            if (currentService.id === 0) { alert('родро┐ро░рпБродрпНрод ро╡рпЗрогрпНроЯро┐роп роЪрпЗро╡рпИропрпИ роорпБродро▓ро┐ро▓рпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН'); return; }
            document.getElementById('editServiceName').value = currentService.name;
            document.getElementById('editServiceCategory').value = currentService.category;
            document.getElementById('editServicePrice').value = currentService.price;
            document.getElementById('editServiceDescription').value = currentService.description || '';
            document.getElementById('editServiceIcon').value = currentService.icon || 'fas fa-id-card';
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            document.getElementById('editServiceDocuments').value = allDocuments.join('\n');
            document.getElementById('editServiceModal').classList.add('active');
        }
        
        function closeEditServiceModal() { document.getElementById('editServiceModal').classList.remove('active'); }
        
        function saveEditedService() {
            const name = document.getElementById('editServiceName').value.trim();
            const category = document.getElementById('editServiceCategory').value;
            const price = parseFloat(document.getElementById('editServicePrice').value) || 0;
            const description = document.getElementById('editServiceDescription').value.trim();
            const documentsText = document.getElementById('editServiceDocuments').value.trim();
            const icon = document.getElementById('editServiceIcon').value;
            if (!name) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЗро╡рпИропро┐ройрпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН'); return; }
            if (!category) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЗро╡рпИ ро╡роХрпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН'); return; }
            if (price <= 0) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪро░ро┐ропро╛рой роХроЯрпНроЯрогродрпНродрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН'); return; }
            const updatedService = { ...currentService, name: name, category: category, price: price, description: description || `${name} роЪрпЗро╡рпИ`, icon: icon, documents: documentsText ? documentsText.split('\n').filter(d => d.trim()) : ["ро╡ро┐рокро░роЩрпНроХро│рпН родрпЗро╡рпИрокрпНрокроЯрпБроорпН"] };
            if (currentService.isPredefined) {
                const serviceIndex = predefinedServices.findIndex(s => s.id === currentService.id);
                if (serviceIndex !== -1) { predefinedServices[serviceIndex] = updatedService; localStorage.setItem('dhassPredefinedServices', JSON.stringify(predefinedServices)); currentService = updatedService; }
            } else {
                const serviceIndex = customServices.findIndex(s => s.id === currentService.id);
                if (serviceIndex !== -1) { customServices[serviceIndex] = updatedService; saveCustomServicesToStorage(); currentService = updatedService; }
            }
            saveToLocalStorage(); renderServices(); updateDisplay(); updateDocumentsList(); updateWhatsAppMessage(); closeEditServiceModal();
            alert(`роЪрпЗро╡рпИ "${name}" ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ родро┐ро░рпБродрпНродрокрпНрокроЯрпНроЯродрпБ!`);
        }
        
        function openAddDocumentModal() { document.getElementById('addDocumentModal').classList.add('active'); }
        function closeAddDocumentModal() { document.getElementById('addDocumentModal').classList.remove('active'); }
        
        function addDocument() {
            const newDoc = document.getElementById('newDocument').value.trim();
            if (newDoc) {
                if (!currentService.customDocuments) { currentService.customDocuments = [...currentService.documents]; }
                currentService.customDocuments.push(newDoc);
                saveToLocalStorage(); updateDocumentsList(); closeAddDocumentModal(); updateWhatsAppMessage();
                document.getElementById('newDocument').value = ''; alert('рокрпБродро┐роп роЖро╡рогроорпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
            }
        }
        
        function openEditDocumentModal() {
            if (currentService.id === 0) { alert('роорпБродро▓ро┐ро▓рпН роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН'); return; }
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            const editDocModal = document.createElement('div');
            editDocModal.className = 'modal active'; editDocModal.id = 'editDocumentModal';
            editDocModal.innerHTML = `<div class="modal-content"><div class="modal-header">роЖро╡рогроЩрпНроХро│рпИ родро┐ро░рпБродрпНродрпБ</div><div style="margin-bottom: 15px;"><label style="display: block; font-weight: 600; margin-bottom: 6px;">роЖро╡рогроЩрпНроХро│рпН (роТро╡рпНро╡рпКро░рпБ ро╡ро░ро┐ропро┐ро▓рпБроорпН роТройрпНро▒рпБ)</label><textarea id="editDocumentsText" class="modal-textarea" placeholder="роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ
рокрпБроХрпИрокрпНрокроЯроорпН
роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ" style="min-height: 150px;">${allDocuments.join('\n')}</textarea></div><div class="modal-buttons"><button type="button" class="btn-add" onclick="saveEditedDocuments()">роЪрпЗрооро┐</button><button type="button" class="btn-cancel" onclick="closeEditDocumentModal()">ро░родрпНродрпБ</button></div></div>`;
            document.body.appendChild(editDocModal);
        }
        
        function saveEditedDocuments() {
            const editedText = document.getElementById('editDocumentsText').value.trim();
            if (editedText) {
                const newDocuments = editedText.split('\n').filter(d => d.trim());
                currentService.customDocuments = newDocuments;
                if (currentService.isPredefined) {
                    const serviceIndex = predefinedServices.findIndex(s => s.id === currentService.id);
                    if (serviceIndex !== -1) {
                        predefinedServices[serviceIndex] = { ...predefinedServices[serviceIndex], customDocuments: newDocuments };
                        localStorage.setItem('dhassPredefinedServices', JSON.stringify(predefinedServices));
                    }
                }
                saveToLocalStorage(); updateDocumentsList(); closeEditDocumentModal(); updateWhatsAppMessage();
                alert('роЖро╡рогроЩрпНроХро│рпН родро┐ро░рпБродрпНродрокрпНрокроЯрпНроЯрой!');
            }
        }
        
        function closeEditDocumentModal() { const modal = document.getElementById('editDocumentModal'); if (modal) { modal.remove(); } }
        
        function updateDocumentsList() {
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            const documentsList = document.getElementById('documentsList'); documentsList.innerHTML = '';
            if (allDocuments.length === 0) {
                documentsList.innerHTML = `<li class="document-item"><i class="fas fa-info-circle"></i><span>роЖро╡рогроЩрпНроХро│рпН родрпЗро╡рпИрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ</span></li>`;
            } else {
                allDocuments.forEach((doc, index) => {
                    const li = document.createElement('li'); li.className = 'document-item';
                    li.innerHTML = `<i class="fas fa-file-alt"></i><span style="flex: 1;">${doc}</span>`;
                    documentsList.appendChild(li);
                });
            }
        }
        
        function updateWhatsAppMessage() {
            const customerName = document.getElementById('customerName').value || 'ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН';
            let message = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН\n\nро╡рогроХрпНроХроорпН ${customerName}!\n\nроЪрпЗро╡рпИ: ${currentService.name}\nроЪрпЗро╡рпИ ро╡роХрпИ: ${currentService.category}\nроХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}\n\n`;
            if (currentService.description) { message += `ро╡ро┐ро│роХрпНроХроорпН: ${currentService.description}\n\n`; }
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            if (allDocuments.length > 0) {
                message += `родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:\n`; allDocuments.forEach((doc, index) => { message += `тЬУ ${doc}\n`; }); message += `\n`;
            }
            message += `родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│:\nЁЯУЮ 8870232332\nЁЯУЮ 9843232324 (WhatsApp)\nЁЯУН родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1\n\nроиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!`;
            document.getElementById('messagePreview').textContent = message;
        }
        
        function testWhatsAppMessage() {
            const customerName = document.getElementById('customerName').value || 'ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН';
            let message = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН\n\nро╡рогроХрпНроХроорпН ${customerName}!\n\nроЪрпЗро╡рпИ: ${currentService.name}\nроЪрпЗро╡рпИ ро╡роХрпИ: ${currentService.category}\nроХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}\n\n`;
            if (currentService.description) { message += `ро╡ро┐ро│роХрпНроХроорпН: ${currentService.description}\n\n`; }
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            if (allDocuments.length > 0) {
                message += `родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:\n`; allDocuments.forEach((doc, index) => { message += `тЬУ ${doc}\n`; }); message += `\n`;
            }
            message += `родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│:\nЁЯУЮ 8870232332\nЁЯУЮ 9843232324 (WhatsApp)\nЁЯУН родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1\n\nроиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!`;
            alert('WhatsApp роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:\n\n' + message);
        }
        
        function sendWhatsAppMessage() {
            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            if (!customerName || !customerPhone) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН'); return; }
            const phoneRegex = /^[6-9]\d{9}$/; const cleanPhone = customerPhone.replace(/\D/g, '');
            if (!phoneRegex.test(cleanPhone)) { alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛рой роЗроирпНродро┐роп родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН (10 роЗро▓роХрпНроХроЩрпНроХро│рпН)\n\nроО.роХро╛: 9843232324'); return; }
            let message = `родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН%0A%0Aро╡рогроХрпНроХроорпН ${encodeURIComponent(customerName)}!%0A%0AроЪрпЗро╡рпИ: ${encodeURIComponent(currentService.name)}%0AроЪрпЗро╡рпИ ро╡роХрпИ: ${encodeURIComponent(currentService.category)}%0AроХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}%0A%0A`;
            if (currentService.description) { message += `ро╡ро┐ро│роХрпНроХроорпН: ${encodeURIComponent(currentService.description)}%0A%0A`; }
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            if (allDocuments.length > 0) { message += `родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:%0A`; allDocuments.forEach((doc, index) => { message += `тЬУ ${encodeURIComponent(doc)}%0A`; }); message += `%0A`; }
            message += `родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│:%0AЁЯУЮ 8870232332%0AЁЯУЮ 9843232324 (WhatsApp)%0AЁЯУН родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1%0A%0AроиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!`;
            const whatsappUrl = `https://wa.me/91${cleanPhone}?text=${message}`;
            window.open(whatsappUrl, '_blank'); saveCustomerInfo(customerName, cleanPhone);
            alert(`WhatsApp роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯродрпБ!\n\n${customerName} (${cleanPhone})`);
        }
        
        // роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯродрпНродрпИ рокрпБродрпБрокрпНрокро┐роХрпНроХ
        function updateThankYouMessage() {
            const customerName = document.getElementById('thankYouCustomerName').value || 'рокрпЖропро░рпН';
            const services = document.getElementById('thankYouServices').value || '[роЪрпЗро╡рпИроХро│рпН]';
            const refNumbers = document.getElementById('thankYouRefNumbers').value || '[роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН]';
            
            let message = `ро╡рогроХрпНроХроорпН ${customerName}!\n\n`;
            message += `роОроЩрпНроХро│рпН родро╛ро╕рпН рокрпКродрпБроЪрпЗро╡рпИ роорпИропродрпНродрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНродрпБ, ро╡ро░рпБроХрпИ рокрпБро░ро┐роирпНродроорпИроХрпНроХрпБ, рооро┐роХро╡рпБроорпН роиройрпНро▒ро┐.\n\n`;
            message += `роЪрпЗро╡рпИроХро│рпН: ${services}\n`;
            message += `роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН: ${refNumbers}\n\n`;
            message += `роЗроирпНрод роиро╛ро│рпН роЗройро┐родро╛роХ роЕроорпИроп ро╡ро╛ро┤рпНродрпНродрпБроХро┐ро▒рпЛроорпН.\n\n`;
            message += `роиройрпНро▒ро┐!\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН\nродрпВродрпНродрпБроХрпНроХрпБроЯро┐-1`;
            
            document.getElementById('thankYouMessagePreview').textContent = message;
        }

        // роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роЪрпЛродройрпИ
        function testThankYouMessage() {
            const customerName = document.getElementById('thankYouCustomerName').value || 'рокрпЖропро░рпН';
            const services = document.getElementById('thankYouServices').value || '[роЪрпЗро╡рпИроХро│рпН]';
            const refNumbers = document.getElementById('thankYouRefNumbers').value || '[роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН]';
            
            let message = `ро╡рогроХрпНроХроорпН ${customerName}!\n\n`;
            message += `роОроЩрпНроХро│рпН родро╛ро╕рпН рокрпКродрпБроЪрпЗро╡рпИ роорпИропродрпНродрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНродрпБ, ро╡ро░рпБроХрпИ рокрпБро░ро┐роирпНродроорпИроХрпНроХрпБ, рооро┐роХро╡рпБроорпН роиройрпНро▒ро┐.\n\n`;
            message += `роЪрпЗро╡рпИроХро│рпН: ${services}\n`;
            message += `роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН: ${refNumbers}\n\n`;
            message += `роЗроирпНрод роиро╛ро│рпН роЗройро┐родро╛роХ роЕроорпИроп ро╡ро╛ро┤рпНродрпНродрпБроХро┐ро▒рпЛроорпН.\n\n`;
            message += `роиройрпНро▒ро┐!\nродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН\nродрпВродрпНродрпБроХрпНроХрпБроЯро┐-1`;
            
            alert('роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роорпБройрпНройрпЛроЯрпНроЯроорпН:\n\n' + message);
        }

        // роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрпБродро▓рпН
        function sendThankYouMessage() {
            const customerName = document.getElementById('thankYouCustomerName').value;
            const customerPhone = document.getElementById('thankYouCustomerPhone').value;
            const services = document.getElementById('thankYouServices').value;
            const refNumbers = document.getElementById('thankYouRefNumbers').value;
            
            if (!customerName || !customerPhone) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ ро╡ро╛роЯро┐роХрпНроХрпИропро╛ро│ро░рпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            const phoneRegex = /^[6-9]\d{9}$/;
            const cleanPhone = customerPhone.replace(/\D/g, '');
            
            if (!phoneRegex.test(cleanPhone)) {
                alert('родропро╡рпБ роЪрпЖропрпНродрпБ роЪрпЖро▓рпНро▓рпБрокроЯро┐ропро╛рой роЗроирпНродро┐роп родрпКро▓рпИрокрпЗроЪро┐ роОрогрпНрогрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН (10 роЗро▓роХрпНроХроЩрпНроХро│рпН)');
                return;
            }
            
            let message = `ро╡рогроХрпНроХроорпН ${encodeURIComponent(customerName)}!%0A%0A`;
            message += `роОроЩрпНроХро│рпН родро╛ро╕рпН рокрпКродрпБроЪрпЗро╡рпИ роорпИропродрпНродрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНродрпБ, ро╡ро░рпБроХрпИ рокрпБро░ро┐роирпНродроорпИроХрпНроХрпБ, рооро┐роХро╡рпБроорпН роиройрпНро▒ро┐.%0A%0A`;
            message += `роЪрпЗро╡рпИроХро│рпН: ${encodeURIComponent(services || '')}%0A`;
            message += `роХрпБро▒ро┐рокрпНрокрпБ роОрогрпНроХро│рпН: ${encodeURIComponent(refNumbers || '')}%0A%0A`;
            message += `роЗроирпНрод роиро╛ро│рпН роЗройро┐родро╛роХ роЕроорпИроп ро╡ро╛ро┤рпНродрпНродрпБроХро┐ро▒рпЛроорпН.%0A%0A`;
            message += `роиройрпНро▒ро┐!%0Aродро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН%0AродрпВродрпНродрпБроХрпНроХрпБроЯро┐-1`;
            
            const whatsappUrl = `https://wa.me/91${cleanPhone}?text=${message}`;
            window.open(whatsappUrl, '_blank');
            
            alert(`роиройрпНро▒ро┐ роЪрпЖропрпНродро┐ роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯродрпБ!\n\n${customerName} (${cleanPhone})`);
        }
        
        function saveServiceInfo() { saveToLocalStorage(); alert('роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯрой!'); }
        function saveToLocalStorage() { localStorage.setItem('dhassCurrentService', JSON.stringify(currentService)); }
        
        function loadSavedData() {
            const savedService = localStorage.getItem('dhassCurrentService');
            if (savedService) { try { const parsed = JSON.parse(savedService); currentService = { ...currentService, ...parsed }; updateDisplay(); updateDocumentsList(); } catch (e) { console.error("Error loading saved service:", e); } }
            const lastCustomer = localStorage.getItem('lastCustomer');
            if (lastCustomer) { try { const customer = JSON.parse(lastCustomer); document.getElementById('customerName').value = customer.name || ''; document.getElementById('customerPhone').value = customer.phone || ''; } catch (e) { console.error("Error loading customer info:", e); } }
            updateWhatsAppMessage();
            updateThankYouMessage();
        }
        
        function saveCustomerInfo(name, phone) {
            const customerInfo = { name: name, phone: phone, date: new Date().toISOString(), service: currentService.name };
            localStorage.setItem('lastCustomer', JSON.stringify(customerInfo));
        }
        
        function saveCustomServicesToStorage() { localStorage.setItem('dhassCustomServices', JSON.stringify(customServices)); }
        
        function resetPredefinedServices() {
            if (confirm('ро░рпЖроЯро┐роорпЗроЯрпН роЪрпЗро╡рпИроХро│рпИ роЕроЪро▓рпН роиро┐ро▓рпИроХрпНроХрпБ роорпАроЯрпНроЯроорпИроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?\n\nроЗродрпБ роЙроЩрпНроХро│рпН родро┐ро░рпБродрпНродроЩрпНроХро│рпИ роЕро┤ро┐роХрпНроХрпБроорпН!')) {
                predefinedServices = [...originalPredefinedServices]; localStorage.removeItem('dhassPredefinedServices');
                if (currentService.isPredefined) {
                    const originalService = originalPredefinedServices.find(s => s.id === currentService.id);
                    if (originalService) { currentService = {...originalService}; updateDisplay(); updateDocumentsList(); }
                }
                renderServices(); alert('ро░рпЖроЯро┐роорпЗроЯрпН роЪрпЗро╡рпИроХро│рпН роЕроЪро▓рпН роиро┐ро▓рпИроХрпНроХрпБ роорпАроЯрпНроЯроорпИроХрпНроХрокрпНрокроЯрпНроЯрой!');
            }
        }
        
        function clearAll() {
            if (confirm('роЕройрпИродрпНродрпБ родроХро╡ро▓рпНроХро│рпИропрпБроорпН роЕро┤ро┐роХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?\n\nроЗродрпБ роХро╕рпНроЯроорпН роЪрпЗро╡рпИроХро│рпН роЙроЯрпНрокроЯ роОро▓рпНро▓ро╛ро╡ро▒рпНро▒рпИропрпБроорпН роЕро┤ро┐роХрпНроХрпБроорпН!')) {
                currentService = { id: 0, name: "роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", category: "роЪрпЗро╡рпИ ро╡роХрпИ", price: 0, description: "роорпЗро▓рпЗ роЙро│рпНро│ рокроЯрпНроЯройрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роТро░рпБ роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН", icon: "fas fa-question-circle", documents: ["роЪрпЗро╡рпИропрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН"], customDocuments: [], isPredefined: false };
                document.getElementById('customerName').value = ''; document.getElementById('customerPhone').value = '';
                document.getElementById('thankYouCustomerName').value = ''; document.getElementById('thankYouCustomerPhone').value = '';
                document.getElementById('thankYouServices').value = ''; document.getElementById('thankYouRefNumbers').value = '';
                document.querySelectorAll('.service-btn').forEach(btn => btn.classList.remove('active'));
                updateDocumentsList(); localStorage.removeItem('dhassCurrentService'); localStorage.removeItem('lastCustomer');
                localStorage.removeItem('dhassCustomServices'); localStorage.removeItem('dhassPredefinedServices');
                predefinedServices = [...originalPredefinedServices]; customServices = [];
                updateDisplay(); updateWhatsAppMessage(); updateThankYouMessage(); renderServices(); alert('роЕройрпИродрпНродрпБ родроХро╡ро▓рпНроХро│рпБроорпН роЕро┤ро┐роХрпНроХрокрпНрокроЯрпНроЯрой!');
            }
        }
        
        function printPage() {
            const allDocuments = [...(currentService.customDocuments || currentService.documents || [])];
            const printContent = `<!DOCTYPE html><html><head><title>родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН</title><style>body { font-family: Arial, sans-serif; padding: 20px; } .header { text-align: center; border-bottom: 3px solid #4F46E5; padding-bottom: 20px; margin-bottom: 30px; } .header h1 { color: #4F46E5; } .service-info { margin-bottom: 30px; } .service-name { font-size: 24px; font-weight: bold; color: #1F2937; margin-bottom: 10px; } .service-price { font-size: 20px; color: #059669; font-weight: bold; } .documents { margin-top: 20px; } .document-item { margin-bottom: 10px; padding-left: 20px; position: relative; } .document-item:before { content: "тЬУ"; position: absolute; left: 0; color: #059669; } .contact-info { margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; } .print-date { text-align: right; color: #666; margin-bottom: 20px; } .description { background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 15px 0; }</style></head><body><div class="print-date">роЕроЪрпНроЪро┐роЯрокрпНрокроЯрпНроЯ родрпЗродро┐: ${new Date().toLocaleDateString('ta-IN')}</div><div class="header"><h1>родро╛ро╕рпН рокрпКродрпБ роЪрпЗро╡рпИ роорпИропроорпН</h1><p>Thoothukudi-1 - роЪрпЗро╡рпИ ро╡ро┐рокро░роЩрпНроХро│рпН</p></div><div class="service-info"><div class="service-name">${currentService.name}</div><div style="color: #6B7280; margin-bottom: 10px;">${currentService.category}</div><div class="service-price">роХроЯрпНроЯрогроорпН: тВ╣${currentService.price.toFixed(2)}</div>${currentService.description ? `<div class="description"><strong>ро╡ро┐ро│роХрпНроХроорпН:</strong><br>${currentService.description}</div>` : ''}${allDocuments.length > 0 ? `<div class="documents"><h3 style="color: #4F46E5; margin-bottom: 15px;">родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН:</h3>${allDocuments.map(doc => `<div class="document-item">${doc}</div>`).join('')}</div>` : ''}</div><div class="contact-info"><h3 style="color: #4F46E5; margin-bottom: 10px;">родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│:</h3><p>ЁЯУЮ 88 70 23 23 32 / 98 43 23 23 24</p><p>ЁЯУз dhasscsc@example.com</p><p>ЁЯУН родрпВродрпНродрпБроХрпНроХрпБроЯро┐-1</p></div><div style="text-align: center; margin-top: 40px; color: #666; font-size: 14px;"><p>роиройрпНро▒ро┐! роорпАрогрпНроЯрпБроорпН ро╡ро░рпБроХ!</p></div></body></html>`;
            const printWindow = window.open('', '_blank'); printWindow.document.write(printContent); printWindow.document.close(); printWindow.focus();
            setTimeout(() => { printWindow.print(); }, 250);
        }
        
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 's') { e.preventDefault(); saveServiceInfo(); }
            if (e.ctrlKey && e.key === 'p') { e.preventDefault(); printPage(); }
            if (e.ctrlKey && e.key === 'e') { e.preventDefault(); openEditServiceModal(); }
            if (e.ctrlKey && e.key === 'd') { e.preventDefault(); openEditDocumentModal(); }
            if (e.key === 'Escape') { closeAddDocumentModal(); closeEditServiceModal(); closeAddServiceModal(); closeEditDocumentModal(); }
        });
        setInterval(saveToLocalStorage, 30000); setInterval(saveCustomServicesToStorage, 30000);
    </script>
</body>
</html>